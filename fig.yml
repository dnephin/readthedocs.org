#
#
#

webapp:
    build: .
    environment:
        DJANGO_SETTINGS_MODULE: 'webapp_settings'
    volumes_from:
        - webappconfigs
    ports:
        - 8080:8000
    links:
        - database
        - redis
        - search

# TODO: rename since it's not just for webapp anymore
webappconfigs:
    build: dev/webapp_config

database:
    build: dev/database

redis:
    image: redis:latest

# TODO: run a separate api instance?
celery:
    build: dev/celery
    environment:
        DJANGO_SETTINGS_MODULE: 'webapp_settings'
    volumes_from:
        - webappconfigs
    links:
        - redis
        - webapp

# TODO: index fixture projects already in db
search:
    build: dev/search
